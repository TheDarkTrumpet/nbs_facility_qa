FROM rocker/rstudio
USER root
ENV PATH "/usr/lib/rstudio-server/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

RUN apt-get -y clean
RUN rm -Rf /var/lib/apt/lists
RUN echo "Acquire::By-Hash \"yes\"; ">/etc/apt/apt.conf.d/01byhash
RUN echo "deb http://cdn-fastly.deb.debian.org/debian stable main" > /etc/apt/sources.list
RUN echo "deb http://cdn-fastly.deb.debian.org/debian-security stable/updates main" >> /etc/apt/sources.list

RUN apt-get -y update
RUN apt-get -y install default-jre-headless default-jdk-headless r-cran-shiny r-cran-markdown libxml2-dev texlive xzdec
RUN chmod 777 /var/lib/texmf

RUN echo "install.packages(c('shinyjs', 'shinyalert','readxl','rmarkdown','dplyr', 'mailR', 'futile.logger', 'properties', 'kableExtra', 'caTools', 'bitops', 'rprojroot'))" | R -